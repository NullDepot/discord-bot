const Discord = require('discord.js');
const client = new Discord.Client();

module.exports = {
    commands: ['monologue'],
    expectedArgs: '',
    permissionError: 'You need admin permissions to run this command.',
    minArgs: 0,
    maxArgs: 0,
    description: `Invites Strahd to VC to speak his monologue.`,
    callback: (message, arguments, text) => {
        client.on('message', async message => {

            if (message.member.voice.channel) {
                const connection = await message.member.voice.channel.join();  
                const ytdl = require('ytdl-core');
                connection.play(ytdl('https://www.youtube.com/watch?v=0JETysxM7Rs', { filter: 'audioonly' }));
                console.log('Playing audio.');
                
            } else {
                message.reply(`Error: You're not in a VC`);
            }
        })
    },
    permissions: [],
    requiredRoles: [],
}